(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[719],{12344:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>V});var n=r(95155),a=r(12115),i=r(34516),s=r(10489),l=r(33931);function o(e){let{className:t,...r}=e;return(0,n.jsx)(s.b,{"data-slot":"label",className:(0,l.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...r})}var c=r(57356),d=r(38162),u=r(5917);function h(e){let{className:t,...r}=e;return(0,n.jsx)(d.bL,{"data-slot":"checkbox",className:(0,l.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...r,children:(0,n.jsx)(d.C1,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,n.jsx)(u.A,{className:"size-3.5"})})})}function m(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,n.jsx)("table",{"data-slot":"table",className:(0,l.cn)("w-full caption-bottom text-sm",t),...r})})}function b(e){let{className:t,...r}=e;return(0,n.jsx)("thead",{"data-slot":"table-header",className:(0,l.cn)("[&_tr]:border-b",t),...r})}function p(e){let{className:t,...r}=e;return(0,n.jsx)("tbody",{"data-slot":"table-body",className:(0,l.cn)("[&_tr:last-child]:border-0",t),...r})}function f(e){let{className:t,...r}=e;return(0,n.jsx)("tr",{"data-slot":"table-row",className:(0,l.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...r})}function v(e){let{className:t,...r}=e;return(0,n.jsx)("th",{"data-slot":"table-head",className:(0,l.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...r})}function g(e){let{className:t,...r}=e;return(0,n.jsx)("td",{"data-slot":"table-cell",className:(0,l.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...r})}var x=r(62724),k=r(20063);function w(e){return"".concat(e>>>24&255,".").concat(e>>>16&255,".").concat(e>>>8&255,".").concat(255&e)}function j(e){let t=/^([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.exec(e);if(!t)return null;for(let e=1;e<=4;e++){let r=Number(t[e]);if(r<0||r>255)return null}let r=Number(t[1])>>>0,n=Number(t[2])>>>0;return(r<<24|n<<16|Number(t[3])>>>0<<8|Number(t[4])>>>0)>>>0>>>0}function y(e,t){let r=e>>>0;for(let e=31-t;e>=0;e--)r&=~(1<<e);return r>>>0}function N(){return{depthOfChildren:0,numVisibleChildren:0,children:null}}function C(e){if(!e.children)return e.numVisibleChildren=0,e.depthOfChildren=0,1;let t=C(e.children[0]),r=C(e.children[1]);return e.numVisibleChildren=t+r,e.depthOfChildren=t+r,e.numVisibleChildren}function S(e){e&&(e.children=null)}function R(e,t){let r=j(e);if(null===r)return{error:"Invalid network address entered"};let n=Number(t);if(!(n>=0&&n<=32))return{error:"The network mask you have entered is invalid"};let a=y(r,n),i=a!==r;return{network:a,mask:n,changed:i}}function z(e){var t=function e(t){return t.children?"1".concat(e(t.children[0])).concat(e(t.children[1])):"0"}(e);let r="",n=0,a=0;for(let e=0;e<t.length;e++)"1"===t.charAt(e)&&(a|=1<<n),++n>3&&(r+=a.toString(16),a=0,n=0);return n>0&&(r+=a.toString(16)),"".concat(t.length,".").concat(r)}function A(e){let t=function(e){let t=/^(\d+)\.([0-9a-f]+)$/i.exec(null!=e?e:"");if(!t)return null;let r=Number(t[1]),n=t[2].toLowerCase(),a="";for(let e=0;e<r;e++)a+=parseInt(n.charAt(Math.floor(e/4)),16)&1<<e%4?"1":"0";return a}(e),r=N();return t&&"0"!==t&&function e(t,r){if("0"===r.charAt(0))return r.substring(1);t.children=[N(),N()];let n=e(t.children[0],r.substring(1));return e(t.children[1],n)}(r,t),C(r),r}function O(e){let{network:t,mask:r,rootNode:n,rows:a}=e,i=w(t),s=z(n),l="network=".concat(i,"&mask=").concat(r,"&division=").concat(s);return{version:2,network:i,mask:r,division:s,params:{network:i,mask:r,division:s},query:l,rows:Array.isArray(a)?a.map(e=>({subnet:e.subnetCidr,netmask:e.netmask,range:e.addressRange,usable:e.usableRange,hosts:e.hostCount})):void 0}}async function E(e){let{blob:t,filename:r}=e,n=URL.createObjectURL(t),a=document.createElement("a");a.href=n,a.download=r,document.body.appendChild(a),a.click(),a.remove(),setTimeout(()=>URL.revokeObjectURL(n),0)}async function L(e){let t=await e.text();try{let e=JSON.parse(t),r=e.network,n=e.mask,a=e.division;if(r&&null!=n&&a||!e.params||(r=e.params.network,n=e.params.mask,a=e.params.division),(!r||null==n||!a)&&"string"==typeof e.query){let t=new URLSearchParams(e.query);r=r||t.get("network");let i=t.get("mask");n=null!=n?n:null!=i?Number(i):n,a=a||t.get("division")}return{network:j(r),mask:Number(n),root:A(a)}}catch(r){let e=t.trim().split(/\r?\n/);if(e.length>=2){let t=e[0].split(/,(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/).map(e=>e.replace(/^\"|\"$/g,"").toLowerCase()),r=t.indexOf("network"),n=t.indexOf("mask"),a=t.indexOf("division");for(let t=1;t<e.length;t++){let i=e[t];if(!i.trim())continue;let s=i.split(/,(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/).map(e=>e.replace(/^\"|\"$/g,"")),l=r>=0?s[r]:void 0,o=n>=0?s[n]:void 0,c=a>=0?s[a]:void 0;if(l&&null!=o&&c)return{network:j(l),mask:Number(o),root:A(c)}}}throw Error("Unsupported import format")}}var $=r(18720);function _(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return $.oR.success(e,t)}function U(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return $.oR.error(e,t)}var P=r(5379);let I=e=>{let{...t}=e,{theme:r="system"}=(0,P.D)();return(0,n.jsx)($.l$,{theme:r,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...t})};function M(){let{setActions:e}=(0,x.d)(),{networkInput:t,maskInput:r,rows:s,visible:l,setNetworkInput:d,setMaskInput:u,setVisible:j,applyAndMaybeReset:P,onDivide:M,onJoin:V,handleImport:F,exportJson:J,exportCsv:D,shareLink:B,resetDivisions:T}=function(){let e=(0,k.useRouter)(),t=(0,k.useSearchParams)(),[r,n]=a.useState(t.get("network")||"192.168.0.0"),[i,s]=a.useState(t.get("mask")||"16"),[l,o]=a.useState(0),[c,d]=a.useState(0),[u,h]=a.useState(N()),[m,b]=a.useState({netmask:!1,range:!0,useable:!0,hosts:!0});a.useEffect(()=>{let e=t.get("division"),a=t.get("mask"),l=t.get("network");if(l&&a){let{network:t,mask:r,error:i}=R(l,a);if(i)return void U(i);o(t),d(r),n(w(t)),s(String(r)),e?h(A(e)):h(N())}else{let{network:e,mask:t}=R(r,i);o(e),d(t),h(N())}},[]),a.useEffect(()=>{C(u)},[u]);let{rows:p,parentMap:f}=a.useMemo(()=>(function(e,t,r){let n=[],a=new Map;return!function e(t,r,i,s){var l;if(s&&a.set(t,s),t.children){e(t.children[0],r,i+1,t);let n=r+(l=i+1,2**(32-l))>>>0;e(t.children[1],n,i+1,t)}else{let e,a,s,l=r>>>0,o=r+2**(32-i)-1>>>0,c=l+1>>>0,d=o-1>>>0;32===i?(s=a=w(l),e=1):31===i?(s=a="".concat(w(l)," - ").concat(w(o)),e=2):(a="".concat(w(l)," - ").concat(w(o)),s="".concat(w(c)," - ").concat(w(d)),e=d-c+1>>>0),n.push({address:r,mask:i,subnetCidr:"".concat(w(r),"/").concat(i),netmask:w(y(0xffffffff,i)),addressRange:a,usableRange:s,hostCount:e,node:t})}}(e,t,r,null),{rows:n,parentMap:a}})(u,l,c),[u,l,c]),v=a.useCallback((t,r,n)=>{let a=new URLSearchParams;a.set("network",w(t)),a.set("mask",String(r)),a.set("division",z(n)),e.replace("?".concat(a.toString()))},[e]),g=a.useCallback(()=>{let{network:e,mask:t,error:a,changed:s}=R(r,i);if(a)return void U(a);let m=e!==l,b=t!==c,p=u;b&&h(p=N()),(m||b||s)&&(o(e),d(t),n(w(e)),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};$.oR.message(e,t)}("Network updated",{description:"".concat(w(e),"/").concat(t)})),v(e,t,p)},[r,i,l,c,u,h,o,d,n,v]),x=a.useCallback(e=>{!e.children&&e&&(e.children=[N(),N()]);let t={...u};C(t),h(t),v(l,c,t)},[u,l,c,h,v]),j=a.useCallback(e=>{let t=f.get(e);t?S(t):S(e);let r={...u};C(r),h(r),v(l,c,r)},[f,u,l,c,h,v]),P=a.useCallback(async()=>{try{let e=document.createElement("input");e.type="file",e.accept=".json,.csv",e.onchange=async()=>{var t;let r=null==(t=e.files)?void 0:t[0];if(r)try{let{network:e,mask:t,root:a}=await L(r);if(null==e||Number.isNaN(t))throw Error("Invalid import data");o(e),d(t),n(w(e)),s(String(t)),h(a),C(a),v(e,t,a),_("Imported configuration applied")}catch(e){U((null==e?void 0:e.message)||"Failed to import file")}},e.click()}catch(e){U("Import not supported")}},[o,d,n,s,h,v]),I=a.useCallback(()=>{E({blob:new Blob([JSON.stringify(O({network:l,mask:c,rootNode:u,rows:p}),null,2)],{type:"application/json"}),filename:"subnetting-".concat(w(l),"-").concat(c,".json")})},[l,c,u,p]),M=a.useCallback(()=>{E({blob:function(e){if(Array.isArray(e.rows)&&e.rows.length>0){let t=e=>'"'.concat(String(null!=e?e:"").replaceAll('"','""'),'"'),r=["network,mask,division,subnet,netmask,range,usable,hosts"];for(let n of e.rows){let a=[e.network,String(e.mask),e.division,n.subnet,n.netmask,n.range,n.usable,String(n.hosts)];r.push(a.map(t).join(","))}return new Blob([r.join("\n")],{type:"text/csv"})}let t=[e.network,String(e.mask),e.division];return new Blob(["".concat("network,mask,division","\n").concat(t.map(e=>'"'.concat(String(e).replaceAll('"','""'),'"')).join(","))],{type:"text/csv"})}(O({network:l,mask:c,rootNode:u,rows:p})),filename:"subnetting-".concat(w(l),"-").concat(c,".csv")})},[l,c,u,p]),V=a.useCallback(async()=>{try{await navigator.clipboard.writeText(window.location.href),_("Link copied to clipboard")}catch(e){U("Failed to copy link")}},[]),F=a.useCallback(()=>{let e=N();h(e),v(l,c,e)},[l,c,h,v]);return{networkInput:r,maskInput:i,baseNetwork:l,baseMask:c,rows:p,visible:m,setNetworkInput:n,setMaskInput:s,setVisible:b,applyAndMaybeReset:g,onDivide:x,onJoin:j,handleImport:P,exportJson:I,exportCsv:M,shareLink:V,resetDivisions:F}}(),q=a.useMemo(()=>[{key:"import",label:"Import",variant:"outline",size:"sm",onClick:F},{key:"export",type:"split-dropdown",label:"Export",variant:"outline",size:"sm",onClick:J,menu:[{key:"export-json",label:"JSON",onClick:J},{key:"export-csv",label:"CSV",onClick:D}]},{key:"share",label:"Share",variant:"outline",size:"sm",onClick:B},{key:"apply",label:"Update",onClick:P,variant:"default",size:"sm"},{key:"reset",label:"Reset",variant:"destructive",size:"sm",onClick:T}],[F,J,D,B,P,T]);return a.useEffect(()=>(e(q),()=>e([])),[q,e]),(0,n.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,n.jsxs)("div",{className:"flex items-end gap-4",children:[(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(o,{htmlFor:"network",children:"Network Address"}),(0,n.jsx)(i.p,{id:"network",value:t,onChange:e=>d(e.target.value),placeholder:"192.168.0.0",className:"w-44"})]}),(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(o,{htmlFor:"netbits",children:"Mask bits"}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("span",{className:"opacity-70",children:"/"}),(0,n.jsx)(i.p,{id:"netbits",value:r,onChange:e=>u(e.target.value),className:"w-14"})]})]})]}),(0,n.jsx)("div",{className:"flex flex-wrap items-center gap-4",children:Object.entries(l).map(e=>{let[t,r]=e;return(0,n.jsxs)("label",{className:"inline-flex items-center gap-2 text-sm",children:[(0,n.jsx)(h,{checked:r,onCheckedChange:e=>j(r=>({...r,[t]:!!e}))}),(0,n.jsx)("span",{className:"capitalize",children:"useable"===t?"Useable":t})]},t)})}),(0,n.jsx)("div",{className:"rounded-md border",children:(0,n.jsxs)(m,{children:[(0,n.jsx)(b,{children:(0,n.jsxs)(f,{children:[(0,n.jsx)(v,{children:"Subnet address"}),l.netmask&&(0,n.jsx)(v,{children:"Netmask"}),l.range&&(0,n.jsx)(v,{children:"Range of addresses"}),l.useable&&(0,n.jsx)(v,{children:"Useable IPs"}),l.hosts&&(0,n.jsx)(v,{children:"Hosts"}),(0,n.jsx)(v,{children:"Divide"}),(0,n.jsx)(v,{children:"Join"})]})}),(0,n.jsx)(p,{children:s.map((e,t)=>(0,n.jsxs)(f,{children:[(0,n.jsx)(g,{children:e.subnetCidr}),l.netmask&&(0,n.jsx)(g,{children:e.netmask}),l.range&&(0,n.jsx)(g,{children:e.addressRange}),l.useable&&(0,n.jsx)(g,{children:e.usableRange}),l.hosts&&(0,n.jsx)(g,{children:e.hostCount}),(0,n.jsx)(g,{children:(0,n.jsx)(c.$,{size:"sm",variant:32===e.mask?"ghost":"outline",disabled:32===e.mask,onClick:()=>M(e.node),children:"Divide"})}),(0,n.jsx)(g,{children:(0,n.jsx)(c.$,{size:"sm",variant:"secondary",onClick:()=>V(e.node),children:"Join"})})]},"".concat(e.address,"-").concat(e.mask,"-").concat(t)))})]})}),(0,n.jsx)(I,{richColors:!0,position:"bottom-center"})]})}function V(){return(0,n.jsx)(a.Suspense,{fallback:(0,n.jsx)("div",{className:"p-4 text-sm opacity-70",children:"Loading…"}),children:(0,n.jsx)(M,{})})}},22835:(e,t,r)=>{Promise.resolve().then(r.bind(r,12344))},33931:(e,t,r)=>{"use strict";r.d(t,{cn:()=>i});var n=r(2821),a=r(75889);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,n.$)(t))}},34516:(e,t,r)=>{"use strict";r.d(t,{p:()=>i});var n=r(95155);r(12115);var a=r(33931);function i(e){let{className:t,type:r,...i}=e;return(0,n.jsx)("input",{type:r,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...i})}},57356:(e,t,r)=>{"use strict";r.d(t,{$:()=>o});var n=r(95155);r(12115);var a=r(32467),i=r(83101),s=r(33931);let l=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:t,variant:r,size:i,asChild:o=!1,...c}=e,d=o?a.DX:"button";return(0,n.jsx)(d,{"data-slot":"button",className:(0,s.cn)(l({variant:r,size:i,className:t})),...c})}},62724:(e,t,r)=>{"use strict";r.d(t,{ActionsProvider:()=>l,d:()=>s});var n=r(95155),a=r(12115);let i=a.createContext(null);function s(){let e=a.useContext(i);if(!e)throw Error("useActions must be used within ActionsProvider");return e}function l(e){let{children:t}=e,[r,s]=a.useState([]),l=a.useMemo(()=>({actions:r,setActions:s}),[r]);return(0,n.jsx)(i.Provider,{value:l,children:t})}}},e=>{e.O(0,[79,645,441,255,358],()=>e(e.s=22835)),_N_E=e.O()}]);